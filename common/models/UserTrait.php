<?phpnamespace common\models;use backend\modules\kursmanager\models\query\EnrollQuery;use Yii;use backend\modules\kursmanager\models\Enroll;use backend\modules\ordermanager\models\Order;use frontend\models\Kurs;use soft\db\SActiveQuery;trait UserTrait{    public function getFullname()    {        /** @var User $this */        return $this->lastname ." ". $this->firstname;    }    public function getIsSimpleUser()    {        return User::TYPE_USER == $this->type;    }    public function getIsTeacher()    {        return User::TYPE_TEACHER == $this->type;    }    /**     * @return EnrollQuery     */    public function getEnrolls()    {        return $this->hasMany(Enroll::class, ['user_id' => 'id']);    }    /**     * @return SActiveQuery     */    public function getEnrolledCourses()    {        return $this->hasMany(Kurs::class, ['id' => 'kurs_id'])->via('enrolls');    }    /**     * @return EnrollQuery     */    public function getActiveEnrolls()    {        return $this->getEnrolls()->nonExpired();    }    /**     * @return SActiveQuery     */    public function getActiveEnrolledCourses()    {        return $this->hasMany(Kurs::class, ['id' => 'kurs_id'])->via('activeEnrolls');    }    public function getImage()    {        return $this->avatar == '' ? Yii::$app->settings->get('site', 'user_default_avatar') : $this->avatar;    }    /**     * @return SActiveQuery     */    public function getOrders()    {        return $this->hasMany(Order::class, ['user_id' => 'id']);    }    public function getStatusLabel()    {        if ($this->status == self::STATUS_ACTIVE){            return "<span class='text-success'>Faol</span>";        }        if ($this->status == self::STATUS_INACTIVE){            return "<span class='text-warning'>Nofaol</span>";        }        if ($this->status == self::STATUS_DELETED){            return "<span class='text-danger'>Deleted</span>";        }        return "<span class='text-info'>{$this->status}</span>";    }    public function getCourses()    {        return $this->hasMany(\frontend\modules\teacher\models\Kurs::class, ['user_id' => 'id']);    }    public function getEnrolledUsers()    {        return $this->hasMany(Enroll::class, ['kurs_id' => 'id'])->via('courses');    }}