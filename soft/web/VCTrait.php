<?phpnamespace soft\web;use soft\db\SActiveRecord;use Yii;use common\models\User;use yii\base\Model;use yii\web\Request;use yii\web\Response;use yii\web\Session;/** * Controller va View uchun qo'shimcha metodlar * * @property-read boolean $isAjax check if response is ajax * @property-read Request $request * @property-read void $formatJson Set json format for response * @property-read Response $response * @property-read bool $hasUser Whether the current user is a not guest * @property-read User $user * @property-read Session $session **/trait VCTrait{    # <editor-fold desc="Request" defaultstate="collapsed">    public function getRequest()    {        return Yii::$app->getRequest();    }    public function post($name = null, $defaultValue = null)    {        return Yii::$app->request->post($name, $defaultValue);    }    public function getIsAjax()    {        return $this->request->isAjax;    }    # </editor-fold>    # <editor-fold defaultstate="collapsed" desc="Response">    public function getResponse()    {        return Yii::$app->getResponse();    }    /**     * Response formatini json formatiga o'tkazish     */    public function getFormatJson()    {        $this->getResponse()->format = 'json';    }    /**     * Response formatini json formatiga o'tkazish     * @param bool $checkIfAjax json formatiga o'tkazishdan avval requestning ajax ekanligini tekshirish,     *  agar false bo'lsa, tekshirmasdan json formatiga o'tkazadi     */    public function setJsonResponse($checkIfAjax = true)    {        if ($checkIfAjax){            if ($this->isAjax){                $this->formatJson;            }        }        else{            $this->formatJson;        }    }// </editor-fold>    # <editor-fold defaultstate="collapsed" desc="Model">    /**     * @param $model SActiveRecord     * @return mixed     */    public function modelLoad(&$model)    {        return $model->load($this->post());    }    /**     * @param $model SActiveRecord     * @return bool     */    public function modelSave(&$model)    {        return $model->load($this->post()) && $model->save();    }    /**     * @param $model Model     * @return bool     */    public function modelValidate(&$model)    {        return $model->load($this->post()) && $model->validate();    }    # </editor-fold>    # <editor-fold defaultstate="collapsed" desc="User">    public function getUser()    {        return Yii::$app->user;    }    public function getHasUser()    {        return !(Yii::$app->user->isGuest);    }    # </editor-fold>    # <editor-fold defaultstate="collapsed" desc="Session">    public function getSession()    {        return Yii::$app->session;    }    public function setFlash($key, $value = true, $removeAfterAccess = true)    {        $this->getSession()->setFlash($key, $value, $removeAfterAccess);    }    public function getFlash($key, $defaultValue = null, $delete = false)    {        return $this->getSession()->getFlash($key, $defaultValue, $delete);    }    # </editor-fold>}